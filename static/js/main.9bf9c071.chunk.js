(this["webpackJsonpcheck-request"]=this["webpackJsonpcheck-request"]||[]).push([[0],{88:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(31),o=n.n(a),i=(n(88),n(15)),u=n(59),s=n.n(u),l=n(69),j=n(17),f=n(152),b=n(147),h=n(151),m=n(144),d=n(6),p=n(24),O=n(143),v=function e(t,n){var r=t(n);if(!r||"object"!==typeof r)return r;var c=Array.isArray(r)?[]:{};for(var a in r)c[a]=e(t,r[a]);return c},x=function(e,t,n){var r=Object(p.a)(n);return r[e]=t(r[e]),r},g=function(e,t){var n=Object(p.a)(t);return n.splice(e,1),n},y=n(2),C=n(140),k=n(141),w=n(137),S=n(139),P=n(150),R=n(146),A={select:function(e){var t=e.fieldProps,n=e.options,r=e.error;return Object(y.jsxs)(C.a,{fullWidth:!0,error:!!r,children:[Object(y.jsx)(k.a,{children:t.label}),Object(y.jsx)(w.a,Object(j.a)(Object(j.a)({},t),{},{children:n.map((function(e){return Object(y.jsx)(S.a,{value:e,children:e},e)}))})),r&&Object(y.jsx)(P.a,{children:r})]})},text:function(e){var t=e.error,n=e.fieldProps;return Object(y.jsx)(R.a,Object(j.a)({fullWidth:!0,error:!!t,helperText:t},n))},rows:function(e){var t=e.elements,n=e.fieldProps,r=n.value,c=n.onChange;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(O.a,{container:!0,spacing:1,children:r.map((function(e,n){var a=function(e){c({target:{value:x(n,e,r)}})};return Object(y.jsxs)(O.a,{container:!0,item:!0,spacing:1,children:[t.map((function(t){return Object(y.jsx)(O.a,{item:!0,xs:12,sm:t.columns,children:Object(y.jsx)(E,{field:t,state:e,setState:a})},t.name)})),Object(y.jsx)(O.a,{item:!0,sm:1,children:n?Object(y.jsx)(m.a,{sx:{width:"100%",height:"100%"},onClick:function(){return c({target:{value:g(n,r)}})},children:"Delete"}):null})]},n)}))}),Object(y.jsx)(m.a,{onClick:function(){return c({target:{value:[].concat(Object(p.a)(r),[{}])}})},children:"Add Row"})]})},calculated:function(e){var t=e.fieldProps,n=t.label,r=t.value,c=e.formatter,a=void 0===c?function(e){return e}:c;return Object(y.jsx)(h.a,{children:Object(y.jsxs)("strong",{children:[n,": ",a(r)]})})}},E=function(e){var t,n=e.field,r=n.name,c=n.type,a=n.props,o=n.options,i=n.showWhen,u=n.elements,s=n.formatter,l=e.state,f=e.setState;if(i&&!i(l))return null;var b=A[c]||A.text,h=Object(j.a)({label:r,value:null!==(t=l[r])&&void 0!==t?t:"",onChange:function(e){return f((function(t){var n;return Object(j.a)(Object(j.a)({},t),{},(n={},Object(d.a)(n,r,e.target.value),Object(d.a)(n,r+"Error",void 0),n))}))}},a),m=l[r+"Error"];return Object(y.jsx)(b,{fieldProps:h,options:o,error:m,elements:u,formatter:s})},q=function(e,t){return!e||e(t)},D=function e(t,n){var r=t.name,c=t.showWhen,a=t.elements;return q(c,n)&&(!n[r]||a&&n[r].some((function(t){return a.some((function(n){return e(n,t)}))})))},F=function e(t,n){return n.reduce((function(t,n){if(n.elements){var r,c=null===(r=t[n.name])||void 0===r?void 0:r.map((function(t){return e(t,n.elements)}));return Object(j.a)(Object(j.a)({},t),{},Object(d.a)({},n.name,c))}return Object(j.a)(Object(j.a)({},t),{},Object(d.a)({},n.name+"Error",D(n,t)&&"Required"))}),t)},W=function e(t,n){return t.filter((function(e){return q(e.showWhen,n)})).map((function(t){var r=t.elements,c=t.name,a=t.formatter,o=void 0===a?function(e){return e}:a;return r?n[c].map((function(t){return"\r\n".concat(e(r,t),"\r\n")})).join(""):"".concat(c,": ").concat((o||function(e){return e})(n[c]||""))})).join("\r\n")},T=function(e,t,n){if(function(e,t){return t.some((function(t){return D(t,e)}))}(t,e))n((function(t){return F(t,e)}));else{var r=(new Date).toLocaleString(),c=W(e,t),a=encodeURIComponent("Date: ".concat(r,"\r\n").concat(c,"\r\n\r\nREMINDER: Attach relevant files."));window.open("mailto:checkrequest@chathambiblechurch.org?subject=Check Request&body=".concat(a))}},M=function(e){return"$"+Number(e).toLocaleString()},N=[{name:"Requestor Name",type:"text"},{name:"Make Check Payable To",type:"text"},{name:"list",type:"rows",elements:[{name:"Account",columns:4,type:"select",options:[]},{name:"Explanation",columns:5,props:{multiline:!0}},{name:"Dollar Amount",columns:2,props:{type:"number"},formatter:M}]},{name:"Total",type:"calculated",formatter:M},{name:"Check Delivery",type:"select",options:["Mail Check","Give Check to Requestor","Place Check in Requestor's Folder"]},{name:"Address",type:"text",showWhen:function(e){return"Mail Check"===e["Check Delivery"]}}],I=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r,c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSKMEpvYGCrwfob-IwuiYWb-im8oTCtYxtj9Uet9rc3jKzSU65t7UU1ssxeY_JcrmSQhDQ_NdnKNE7A/pub?output=tsv");case 2:return r=e.sent,e.next=5,r.text();case 5:c=e.sent,a=null===c||void 0===c?void 0:c.split("\n"),t((function(e){return v((function(e){return"Account"===(null===e||void 0===e?void 0:e.name)?Object(j.a)(Object(j.a)({},e),{},{options:a}):e}),e)})),n(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function U(){var e=Object(r.useState)(!0),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(N.reduce((function(e,t){var n=t.type,r=t.name;return"rows"===n&&(e[r]=[{}]),e}),{})),o=Object(i.a)(a,2),u=o[0],s=o[1],l=Object(r.useState)(N),d=Object(i.a)(l,2),p=d[0],O=d[1];return Object(r.useEffect)((function(){I(O,c)}),[]),function(e,t){var n=e.list.reduce((function(e,t){var n;return e+Number(null!==(n=t["Dollar Amount"])&&void 0!==n?n:0)}),0);Object(r.useEffect)((function(){t((function(e){return Object(j.a)(Object(j.a)({},e),{},{Total:n})}))}),[n])}(u,s),n?Object(y.jsx)(f.a,{sx:{display:"flex",justifyContent:"center"},children:Object(y.jsx)(b.a,{})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(h.a,{p:1,variant:"h4",children:"Check Request Form"}),p.map((function(e){return Object(y.jsx)(f.a,{p:1,children:Object(y.jsx)(E,{field:e,state:u,setState:s})},e.name)})),Object(y.jsx)(h.a,{p:1,children:'Pressing "Submit" will create an email ready to be sent.'}),Object(y.jsx)(h.a,{p:1,children:Object(y.jsx)("strong",{children:"Please attach any necessary documents or receipts to the email before sending."})}),Object(y.jsx)(f.a,{p:1,children:Object(y.jsx)(m.a,{variant:"contained",onClick:function(){return T(p,u,s)},children:"Submit"})}),Object(y.jsx)(h.a,{p:1,children:"When you have sent the email, you may close this page."}),Object(y.jsx)("a",{style:{position:"fixed",right:2,bottom:2,font:"12px sans-serif"},href:"mailto:chathamit@chathambiblechurch.org?subject=Check Request Bug Report",children:"Report a Problem"})]})}var L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,153)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(U,{})}),document.getElementById("root")),L()}},[[96,1,2]]]);
//# sourceMappingURL=main.9bf9c071.chunk.js.map